/* SlabOS — Pixel-first battlestation CSS (Org HTML export)
   Fixed top bars + true sticky-footer behavior (bottom of viewport if short)
   WITHOUT breaking full-bleed width.

   Key technique:
   - body keeps top padding (for fixed bars) + side padding (curved edges)
   - #content becomes the flex column with min-height adjusted for top bars
   - #modeline uses margin-top:auto inside #content
   - #modeline is full-bleed (100vw) but text aligns to padded column
*/

:root{
  /* Canvas (warm/neutral) */
  --bg: #0c0c0c;
  --block: #141414;
  --line: #262626;

  /* Text */
  --fg: #d6d1c4;
  --muted: #b7b1a1;
  --dim: #807a6a;

  /* Accents */
  --green:  #a6e22e;
  --cyan:   #66d9ef;     /* used lightly */
  --orange: #fd971f;
  --pink:   #f92672;
  --yellow: #e6b450;

  /* Geometry */
  --padx: 1.9rem;
  --topbar-h: 72px;
  --workbar-h: 44px;
  --modeline-h: 44px;

  --content-gap-top: 22px;
  --section-gap: 26px;

  --font: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "DejaVu Sans Mono", monospace;
}

*{ box-sizing: border-box; }

html, body{
  height:100%;
  margin:0;
  background: var(--bg) !important;
  color: var(--fg) !important;
}

body{
  font-family: var(--font);
  letter-spacing: 0.2px;
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;

  /* Reserve space for fixed top bars */
  padding-top: calc(var(--topbar-h) + var(--workbar-h) + var(--content-gap-top));

  /* Curved edge padding */
  padding-left: var(--padx);
  padding-right: var(--padx);
}

@supports (padding: env(safe-area-inset-left)){
  body{
    padding-left: calc(var(--padx) + env(safe-area-inset-left));
    padding-right: calc(var(--padx) + env(safe-area-inset-right));
    padding-top: calc(var(--topbar-h) + var(--workbar-h) + var(--content-gap-top) + env(safe-area-inset-top));
  }
}

::selection{ background: rgba(166,226,46,0.22); }

#table-of-contents, .toc, .org-ul.toc { display:none !important; }

a{
  color: rgba(102,217,239,0.85);
  text-decoration:none;
}
a:hover{ color: var(--green); }
a:active{ color: var(--orange); }

/* ---------- TOP BAR (h1) ---------- */
h1{
  position: fixed;
  top:0; left:0; right:0;
  z-index: 200;

  margin:0;
  height: var(--topbar-h);
  display:flex;
  align-items:center;

  padding: 20px calc(var(--padx) + env(safe-area-inset-left)) 16px;

  background: rgba(16,19,23,0.98);
  border-bottom: 1px solid var(--line);

  font-size: 22px;
  font-weight: 800;
  text-transform: lowercase;
  color: var(--green);
}

/* terminal cursor */
h1::after{
  content:"";
  width:10px;
  height:18px;
  margin-left:12px;
  background: var(--green);
  transform: translateY(2px);
  animation: blink 1.1s step-end infinite;
}
@keyframes blink { 0%,45%{opacity:1} 46%,100%{opacity:0} }

/* ---------- WORKSPACE STRIP (h1 + p) ---------- */
h1 + p{
  position: fixed;
  top: var(--topbar-h);
  left:0; right:0;
  z-index: 190;

  margin:0;
  height: var(--workbar-h);
  display:flex;
  align-items:center;

  padding: 0 calc(var(--padx) + env(safe-area-inset-left));
  background: rgba(14,17,21,0.98);
  border-bottom: 1px solid var(--line);

  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  font-size: 15px;
}

h1 + p::-webkit-scrollbar{ height:0; }

h1 + p a{
  display:inline-block;
  padding: 6px 10px;
  margin-right: 6px;
  color: var(--muted);
  border-bottom: 2px solid transparent;
}

h1 + p a:hover,
h1 + p a.active{
  color: var(--fg);
  border-bottom-color: var(--orange);
}

/* ---------- MAKE ORG CONTENT A FLEX COLUMN ---------- */
/* Org HTML typically wraps everything in #content */
#content{
  display: flex;
  flex-direction: column;

  /* This is the key: “content area height” excludes the fixed top bars */
  min-height: calc(100vh - (var(--topbar-h) + var(--workbar-h) + var(--content-gap-top)));
}

/* ---------- SECTION HEADERS ---------- */
h2{
  margin: var(--section-gap) 0 10px 0;
  padding: 10px 12px;

  background: rgba(15,18,22,0.35);
  border: 1px solid var(--line);
  border-left: 4px solid var(--orange);

  color: var(--orange);
  font-size: 18px;
  font-weight: 800;
  letter-spacing: 0.09em;
  text-transform: uppercase;
}

/* ---------- EXAMPLE PANES ---------- */
pre, pre.example{
  background: var(--block);
  border: 1px solid var(--line);
  margin: 12px 0 26px 0;
  overflow: hidden;

  font-family: var(--font);
  font-size: 14px;
  line-height: 1.5;
}

pre.example{ padding: 0; }

pre.example .kv{
  display:grid;
  grid-template-columns: 112px 1fr;
  gap: 8px 14px;
  padding: 14px 16px;

  /* ONLY top flourish in pink */
  box-shadow: inset 0 2px 0 rgba(249,38,114,0.55);
}

pre.example .row{ display: contents; }

pre.example .k{
  color: var(--yellow);
  font-weight: 800;
}
pre.example .k::before{
  content: ":";
  color: var(--dim);
  margin-right: 2px;
}

pre.example .v{
  color: #f2efe6;   /* slightly brighter neutral for pane contrast */
}

pre.example .warn{ color: var(--orange); font-weight: 700; }
pre.example .bad{ color: var(--pink); font-weight: 800; }
pre.example .muted{ color: var(--muted); }

/* ---------- MODELlNE BAR (#modeline) ----------
   - bottom of viewport if page is short (margin-top:auto inside #content)
   - bottom of document if page is long
   - full width (100vw) like the top bars
*/
#modeline{
  margin-top: auto;

  height: var(--modeline-h);
  display:flex;
  align-items:center;

  /* Full bleed */
  width: 100vw;
  margin-left: calc(50% - 50vw);

  padding: 0 calc(var(--padx) + env(safe-area-inset-left));

  background: rgba(14,17,21,0.98);
  border-top: 1px solid var(--line);

  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;

  font-size: 15px;
  font-weight: 500;
  letter-spacing: 0.02em;
  color: var(--muted);

  /* This is the important part */
  margin-bottom: calc(-1 * env(safe-area-inset-bottom));
}

#modeline::-webkit-scrollbar{ height:0; }

/* ---------- Images ---------- */

img{
  max-width: 100%;        /* never overflow content column */
  height: auto;           /* preserve aspect ratio */
  display: block;         /* remove inline spacing weirdness */
  margin: 16px auto;      /* vertical breathing + centered */
  border-radius: 6px;     /* subtle polish */
}

/* If inside example panes, keep them tighter */
pre img,
pre.example img{
  margin: 8px auto;
}

video{
  max-width: 100%;
  width: 100%;
  height: auto;
  display: block;
  margin: 16px auto;
  border: 1px solid var(--line);
  background: #000;
}

/* optional: cap height on tall phones */
video{
  max-height: 50vh;
}

/* ---------- Paragraphs ---------- */

p{
  margin: 12px 0;
  color: var(--fg);
  line-height: 1.45;
}

/* ---------- Lists (Slab style) ---------- */

ul{
  list-style: none;        /* remove default bullets */
  padding-left: 0;
  margin: 12px 0 18px 0;
}

ul li{
  position: relative;
  padding-left: 18px;
  margin: 6px 0;
  color: var(--fg);
}

/* custom bullet marker */
ul li::before{
  content: "•";
  position: absolute;
  left: 0;
  top: 0;
  color: var(--yellow);    /* deep gold */
  font-weight: 700;
}

/* tighten spacing inside panes */
pre + ul,
pre + p{
  margin-top: 8px;
}
