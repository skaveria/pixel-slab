/* SlabOS — battlestation CSS (Org HTML export)
   Org: structure
   CSS: chrome + panes
   JS: compositor (tokens/panes/modeline)
*/
@font-face {
  font-family: "MonoLisaSkav";
  src: url("fonts/MonoLisaMonoLisaSkav-Regular.ttf") format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "MonoLisaSkav";
  src: url("fonts/MonoLisaMonoLisaSkav-RegularItalic.ttf") format("truetype");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

:root{
  --bg: #1c1e1f;
  --block: #202020;
  --line: #2d2e2e;

  --fg: #e8e3d6;
  --pane-fg: #f2efe6;

  --muted: #b7b1a1;
  --dim: #807a6a;

  --green:  #a6e22e;
  --cyan:   #66d9ef;
  --orange: #fd971f;
  --pink:   #f92672;
  --yellow: #e6b450;

  --padx: 1.9rem;
  --topbar-h: 72px;
  --workbar-h: 44px;

  --content-gap-top: 22px;
  --section-gap: 26px;
--font: "MonoLisaSkav", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
         "Liberation Mono", "DejaVu Sans Mono", monospace;
}

*{ box-sizing: border-box; }

html, body{
  height:100%;
  margin:0;
  background: var(--bg) !important;
  color: var(--fg) !important;
}

/* Key: body is a column so #postamble can sit at bottom on short pages */
body{
  display:flex;
  flex-direction: column;
  min-height: 100vh;

  font-family: var(--font);
  letter-spacing: 0.2px;
  line-height: 1.45;
   font-variant-ligatures: none;
  text-rendering: optimizeLegibility;

  padding-top: calc(var(--topbar-h) + var(--workbar-h) + var(--content-gap-top));
  padding-left: var(--padx);
  padding-right: var(--padx);
}

@supports (padding: env(safe-area-inset-left)){
  body{
    padding-left: calc(var(--padx) + env(safe-area-inset-left));
    padding-right: calc(var(--padx) + env(safe-area-inset-right));
    padding-top: calc(var(--topbar-h) + var(--workbar-h) + var(--content-gap-top));
  }
}

::selection{ background: rgba(166,226,46,0.22); }
#table-of-contents, .toc, .org-ul.toc { display:none !important; }

/* Links */
a{ color: rgba(102,217,239,0.85); text-decoration:none; }
a:hover{ color: var(--green); }

/* ---------- Top Bar ---------- */
h1{
  position: fixed;
  top:0; left:0; right:0;
  z-index: 200;

  margin:0;
  height: var(--topbar-h);
  display:flex;
  align-items:center;

  padding: 20px calc(var(--padx) + env(safe-area-inset-left)) 16px;

  background: #202020;
  border-bottom: 1px solid var(--line);

  font-size: 22px;
  font-weight: 800;
  text-transform: lowercase;
  color: var(--green);
}

h1::after{
  content:"";
  width:10px;
  height:18px;
  margin-left:12px;
  background: var(--green);
  transform: translateY(2px);
  animation: blink 1.1s step-end infinite;
}
@keyframes blink { 0%,45%{opacity:1} 46%,100%{opacity:0} }

/* ---------- Workspace Strip ---------- */
h1 + p{
  position: fixed;
  top: var(--topbar-h);
  left:0; right:0;
  z-index: 190;

  margin:0;
  height: var(--workbar-h);
  display:flex;
  align-items:center;

  padding: 0 calc(var(--padx) + env(safe-area-inset-left));
  background: #181a1c;
  border-bottom: 1px solid var(--line);

  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  font-size: 15px;
}

h1 + p::-webkit-scrollbar{ height:0; }

h1 + p a{
  display:inline-block;
  padding: 6px 10px;
  margin-right: 6px;

  color: var(--muted);
  border-bottom: 2px solid transparent;
}

h1 + p a:hover,
h1 + p a.active{
  color: var(--fg);
  border-bottom-color: var(--orange);
}

/* ---------- Section headers ---------- */
h2{
  margin: var(--section-gap) 0 10px 0;
  padding: 10px 12px;

  background: rgba(15,18,22,0.35);
  border: 1px solid var(--line);
  border-left: 4px solid var(--orange);

  color: var(--orange);
  font-size: 18px;
  font-weight: 800;
  letter-spacing: 0.09em;
  text-transform: uppercase;
}

/* Paragraphs */
p{ margin: 12px 0; color: var(--fg); }

/* Lists */
ul{ list-style:none; padding-left:0; margin:12px 0 18px 0; }
ul li{ position:relative; padding-left:18px; margin:6px 0; color:var(--fg); }
ul li::before{ content:"•"; position:absolute; left:0; top:0; color:var(--yellow); font-weight:700; }

/* ---------- Example panes ---------- */
.example{
  background: var(--block);
  border: 1px solid var(--line);
  margin: 12px 0 26px 0;
  overflow: hidden;
  padding: 14px 16px;
  color: var(--pane-fg);
}

pre, pre.example{
  background: var(--block);
  border: 1px solid var(--line);
  margin: 12px 0 26px 0;
  overflow: hidden;

  font-family: var(--font);
  font-size: 14px;
  line-height: 1.5;
  color: var(--pane-fg);
}

pre.example{ padding: 0; }

.example.pane-kv,    pre.example.pane-kv    { box-shadow: inset 0 2px 0 rgba(249,38,114,0.55); }
.example.pane-art,   pre.example.pane-art   { box-shadow: inset 0 2px 0 rgba(102,217,239,0.45); }
.example.pane-warn,  pre.example.pane-warn  { box-shadow: inset 0 2px 0 rgba(253,151,31,0.60); }
.example.pane-media, pre.example.pane-media { box-shadow: inset 0 2px 0 rgba(230,180,80,0.60); }
.example.pane-note,  pre.example.pane-note  { box-shadow: inset 0 2px 0 rgba(128,122,106,0.55); }

pre.example .kv{
  display:grid;
  grid-template-columns: 112px 1fr;
  gap: 8px 14px;
  padding: 14px 16px;
}

pre.example .row{ display: contents; }

pre.example .k{ color: var(--yellow); font-weight: 800; }
pre.example .k::before{ content: ":"; color: var(--dim); margin-right: 2px; }
pre.example .v{ color: var(--pane-fg); }

pre.example .warn{ color: var(--orange); font-weight: 700; }
pre.example .bad{ color: var(--pink); font-weight: 800; }
pre.example .muted{ color: var(--muted); }

/* ---------- Media scaling ---------- */
img{
  max-width:100%;
  height:auto;
  display:block;
  margin:16px auto;
  border:1px solid var(--line);
  background: var(--block);
  padding:6px;
}

video{
  max-width:100%;
  width:100%;
  height:auto;
  max-height:50vh;
  display:block;
  margin:16px auto;
  border:1px solid var(--line);
  background:#000;
}

/* ---------- Postamble cleanup + modeline bar ---------- */

/* Push postamble to bottom on short pages */
#content{ flex: 1 1 auto; }

/* Hide Org’s default postamble junk */
#postamble .author,
#postamble .date,
#postamble .creator,
#postamble .validation{
  display:none !important;
}

/* Reset postamble container */
#postamble{
  margin-top: auto;
  padding: 0;
  border: 0;
  background: transparent;
}

/* The compositor injects #modeline into #postamble */
#modeline{
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);

  height: 44px;
  display: flex;
  align-items: center;
  gap: 10px;

  padding: 0 calc(var(--padx) + env(safe-area-inset-left));

  background: #181a1c;
  border-top: 1px solid var(--line);

  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  font-size: 15px;
  font-weight: 500;
  letter-spacing: 0.02em;
  color: var(--muted);
}

#modeline::-webkit-scrollbar{
  height: 0;
}

/* ---------- Modeline segments ---------- */

#modeline .node{
  color: var(--muted);
  font-weight: 600;
}

#modeline .sep{
  color: var(--dim);
  margin: 0 8px;
}

#modeline .seg{
  display: inline-flex;
  align-items: baseline;
  gap: 6px;
}

#modeline .k{
  color: var(--yellow);
  font-weight: 800;
}

#modeline .k::before{
  content: "";
}

#modeline .v{
  color: var(--pane-fg);
  font-weight: 500;
}

#modeline .v.warn{
  color: var(--orange);
  font-weight: 700;
}

#modeline .v.bad{
  color: var(--pink);
  font-weight: 800;
}
/* ---------- Workspace Strip (works for both old + injected) ---------- */
/* Old pages: #content > h1.title + p
   New injected: #content > p.slab-tabs
*/
#content > h1.title + p,
#content > p.slab-tabs{
  position: fixed;
  top: var(--topbar-h);
  left:0; right:0;
  z-index: 190;

  margin:0;
  height: var(--workbar-h);
  display:flex;
  align-items:center;

  padding: 0 calc(var(--padx) + env(safe-area-inset-left));
  background: #181a1c;
  border-bottom: 1px solid var(--line);

  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  font-size: 15px;
}

#content > h1.title + p::-webkit-scrollbar,
#content > p.slab-tabs::-webkit-scrollbar{
  height:0;
}

#content > h1.title + p a,
#content > p.slab-tabs a{
  display:inline-block;
  padding: 6px 10px;
  margin-right: 6px;

  color: var(--muted);
  border-bottom: 2px solid transparent;
}

#content > h1.title,
h1.title{
  padding-top: calc(20px + env(safe-area-inset-top));
  height: calc(var(--topbar-h) + env(safe-area-inset-top));
}

#content > h1.title + p a:hover,
#content > h1.title + p a.active,
#content > p.slab-tabs a:hover,
#content > p.slab-tabs a.active{
  color: var(--fg);
  border-bottom-color: var(--orange);
}
