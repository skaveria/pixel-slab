{"version":3,"sources":["slab/dom.cljs"],"mappings":";AAIA,cAAA,dAAOA,oCAAIC;AAAX,AACE,OAAgBC,uBAAYD;;AAE9B;;;;oCAAA,4CAAAE,hFAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;eAAA,AAAAE,4CAAAF,eAAA,tEAGWI;AAHX,AAIE,oBAAMA;AAAN,AACE,OAACR,YAAG,CAAA,2EAAA,VAA0BQ;;AADhC;;;AAGF,uBAAA,vBAAMC,sDAAYC;AAAlB,AACE,oBAAMA;AAAN,AACE,gBAAA,fAAM,AAAaA;;AACnBA;;AAFF;;;AAIF;;;;+BAAA,uCAAAC,tEAAME;AAAN,AAAA,IAAAD,aAAAD;IAAAC,iBAAA,AAAAP,4BAAAO;WAAA,AAAAN,4CAAAM,eAAA,lEAGWE;qBAHX,AAAAR,4CAAAM,eAAA,5EAGgBG;AAHhB,AAIE,IAAMC,MAAI,uBAAA,vBAAgBd;AAA1B,AACE,iBAAA,hBAAM,AAAac;;AACnB,CAAM,AAAeA,kBACf,kCAAA,SAAA,zBACED,yBACM,iBAAAE,mBAAIH;AAAJ,AAAA,oBAAAG;AAAAA;;AAAA;;;;;AACdD;;AAEJ;;;4BAAA,5BAAME,gEAEHC;AAFH,AAGE,IAAMC,OAAK,uBAAA,vBAAgBlB;AAA3B,AACE,kBAAA,jBAAM,AAAakB;;AACnB,AAAcA,iBAAKD;;AACnBC;;AAEJ,8BAAA,9BAAMC,oEAAeC;AAArB,AACE,oBAAMA;AAAN,AACE,AAACb,qBAAOa;;AACR,AAAcA,iBAAK,6BAAA,2CAAA,6DAAA,rIAACT;;AACpBS;;AAHF;;;AAKF,2BAAA,wCAAAC,nEAAME,8DAAYH;AAAlB,AAAA,IAAAE,aAAAD;IAAAC,iBAAA,AAAAnB,4BAAAmB;WAAA,AAAAlB,4CAAAkB,eAAA,lEAA+BE;AAA/B,AACE,oBAAMJ;AAAN,AACE,AAACb,qBAAOa;;AACR,AAAcA,iBAAK,6BAAA,2CAAA,xEAACT,8HAA2Ba;;AAC/CJ;;AAHF;;;AAKF,2BAAA,wCAAAK,nEAAME,8DAAYP;AAAlB,AAAA,IAAAM,aAAAD;IAAAC,iBAAA,AAAAvB,4BAAAuB;WAAA,AAAAtB,4CAAAsB,eAAA,lEAA+BF;AAA/B,AACE,oBAAMJ;AAAN,AACE,AAACb,qBAAOa;;AACR,IAAMQ,aAAK,AAACC,sDAAmBL;AAA/B,AACE,AAAcJ,iBAAK,AAACJ,0BAAiBY;;AACvCR;;AAJF;;;AAMF;;;4BAAA,5BAAMU,gEAEHV,KAAKW;AAFR,AAGE,oBAAMX;AAAN,AACE,AAACb,qBAAOa;;AACR,AAAcA,iBAAK,6BAAA,2CAAA,xEAACT,8HAA2B,4CAAKoB;;AACpDX;;AAHF","names":["slab.dom/q1","sel","js/document","p__20827","map__20828","cljs.core/--destructure-map","cljs.core.get","slab.dom/ensure-output-slot!","token-id","slab.dom/clear!","el","p__20829","map__20832","slab.dom/terminal-block-node","text","loading?","pre","or__5002__auto__","slab.dom/media-block-node","rich-node","wrap","slab.dom/show-loading!","slot","p__20838","map__20839","slab.dom/show-text!","body","p__20841","map__20842","slab.dom/show-rich!","node","slab.render/render-rich","slab.dom/show-error!","err"],"sourcesContent":[";; src-cljs/slab/dom.cljs\n(ns slab.dom\n  (:require [slab.render :as render]))\n\n(defn- q1 [sel]\n  (.querySelector js/document sel))\n\n(defn ensure-output-slot!\n  \"Find the output slot for a token-id. Returns the slot element or nil.\n  Expected markup: <div data-slab-slot=\\\"TOKEN-ID\\\"></div>\"\n  [{:keys [token-id]}]\n  (when token-id\n    (q1 (str \"[data-slab-slot=\\\"\" token-id \"\\\"]\"))))\n\n(defn clear! [^js el]\n  (when el\n    (set! (.-innerHTML el) \"\")\n    el))\n\n(defn terminal-block-node\n  \"Create terminal-style output block node.\n  NOTE: map these class names to your existing CSS example container styles.\"\n  [{:keys [text loading?]}]\n  (let [pre (.createElement js/document \"pre\")]\n    (set! (.-className pre) \"slab-terminal\")\n    (set! (.-textContent pre)\n          (cond\n            loading? \"\u258c\"\n            :else (or text \"\")))\n    pre))\n\n(defn media-block-node\n  \"Create media-scaled container node and append rich content.\"\n  [rich-node]\n  (let [wrap (.createElement js/document \"div\")]\n    (set! (.-className wrap) \"slab-media\")\n    (.appendChild wrap rich-node)\n    wrap))\n\n(defn show-loading! [slot]\n  (when slot\n    (clear! slot)\n    (.appendChild slot (terminal-block-node {:loading? true}))\n    slot))\n\n(defn show-text! [slot {:keys [body]}]\n  (when slot\n    (clear! slot)\n    (.appendChild slot (terminal-block-node {:text body}))\n    slot))\n\n(defn show-rich! [slot {:keys [body]}]\n  (when slot\n    (clear! slot)\n    (let [node (render/render-rich body)]\n      (.appendChild slot (media-block-node node)))\n    slot))\n\n(defn show-error!\n  \"Raw, honest error output.\"\n  [slot err]\n  (when slot\n    (clear! slot)\n    (.appendChild slot (terminal-block-node {:text (str err)}))\n    slot))\n"]}