{"version":3,"sources":["slab/state.cljs"],"mappings":";AAEA,gCAAA,hCAAMA;AAAN,AACE,IAAMC,IAAE,QAAA,PAAMC;AAAd,AACE,oBAAM,iBAAAC,oBAAKF;AAAL,AAAA,oBAAAE;AAAA,SAAO,GAAK,YAAYF,UAAI,6CAAA,7CAACG,sDAAW,AAACC,QAAUJ;;AAAnDE;;;AAAN,AAA8DF;;AAA9D;;;AAEJ,+BAAA,/BAAMK;AAAN,AACE,oBACE,AAACN;AACD,OAACO,gBAAmB,AAACP;;AAFvB,GAIE,6CAAA,7CAACI,qDAAU,AAAYI;AACvB,uBAAA,hBAACD;;AALH,OAQM,MAAA,NAACE,mBAAsB,qBAAA,2CAAA,wDAAA,xHAACC,nBACxB,qKAAO,WAAKC,vLACZ;AADO,AAAU,oBAAI,AAAMA;AAAK,OAAOA;;AAAtB;;UACT,WAAKC;AAAL,AAAA","names":["slab.state/dev-state-override","x","js/window","and__5000__auto__","cljs.core._EQ_","js/typeof","slab.state/fetch-state!","js/Promise.resolve","js/location","js/fetch","cljs.core/clj->js","res","_"],"sourcesContent":["(ns slab.state)\n\n(defn dev-state-override []\n  (let [x (aget js/window \"SLAB_STATE\")]\n    (when (and x (not (undefined? x)) (= \"object\" (js/typeof x))) x)))\n\n(defn fetch-state! []\n  (cond\n    (dev-state-override)\n    (js/Promise.resolve (dev-state-override))\n\n    (= \"file:\" (.-protocol js/location))\n    (js/Promise.resolve nil)\n\n    :else\n    (-> (js/fetch \"/api/state\" (clj->js {:cache \"no-store\"}))\n        (.then (fn [res] (if (.-ok res) (.json res) nil)))\n        (.catch (fn [_] nil)))))\n"]}